import{r as s,j as d}from"./react-98b02e0c.js";import{c as A,s as _,o as Te,a as j,l as $,b as N}from"./dom-helpers-3d22b84f.js";import{R as Oe}from"./react-dom-5f88ab80.js";const X=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Me(e,t){const n=X(e),r=X(t);return o=>{n&&n(o),r&&r(o)}}function z(e,t){return s.useMemo(()=>Me(e,t),[e,t])}function je(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e},[e]),t}function h(e){const t=je(e);return s.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function nt(){return s.useState(null)}function G(){const e=s.useRef(!0),t=s.useRef(()=>e.current);return s.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function De(e){const t=s.useRef(null);return s.useEffect(()=>{t.current=e}),t.current}const Ce=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Be=typeof document<"u",V=Be||Ce?s.useLayoutEffect:s.useEffect,Ae=["as","disabled"];function Fe(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Ke(e){return!e||e.trim()==="#"}function J({tagName:e,disabled:t,href:n,target:r,rel:o,role:i,onClick:c,tabIndex:f=0,type:g}){e||(n!=null||r!=null||o!=null?e="a":e="button");const a={tagName:e};if(e==="button")return[{type:g||"button",disabled:t},a];const p=m=>{if((t||e==="a"&&Ke(n))&&m.preventDefault(),t){m.stopPropagation();return}c==null||c(m)},v=m=>{m.key===" "&&(m.preventDefault(),p(m))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:t?void 0:f,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?o:void 0,onClick:p,onKeyDown:v},a]}const Se=s.forwardRef((e,t)=>{let{as:n,disabled:r}=e,o=Fe(e,Ae);const[i,{tagName:c}]=J(Object.assign({tagName:n,disabled:r},o));return d.jsx(c,Object.assign({},o,i,{ref:t}))});Se.displayName="Button";const We=["onKeyDown"];function Ie(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Le(e){return!e||e.trim()==="#"}const Q=s.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=Ie(e,We);const[o]=J(Object.assign({tagName:"a"},r)),i=h(c=>{o.onKeyDown(c),n==null||n(c)});return Le(r.href)||r.role==="button"?d.jsx("a",Object.assign({ref:t},r,o,{onKeyDown:i})):d.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});Q.displayName="Anchor";const rt=Q;function ot(e,t){const n=s.useRef(!0);s.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function Pe(e){const t=s.useRef(e);return t.current=e,t}function Z(e){const t=Pe(e);s.useEffect(()=>()=>t.current(),[])}const B=2**31-1;function ee(e,t,n){const r=n-Date.now();e.current=r<=B?setTimeout(t,r):setTimeout(()=>ee(e,t,n),B)}function st(){const e=G(),t=s.useRef();return Z(()=>clearTimeout(t.current)),s.useMemo(()=>{const n=()=>clearTimeout(t.current);function r(o,i=0){e()&&(n(),i<=B?t.current=setTimeout(o,i):ee(t,o,Date.now()+i))}return{set:r,clear:n}},[])}const He="data-rr-ui-";function Ue(e){return`${He}${e}`}const te=s.createContext(A?window:void 0);te.Provider;function F(){return s.useContext(te)}function _e(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Y=Ue("modal-open");class $e{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return _e(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();t.style={overflow:o.style.overflow,[r]:o.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(_(o,r)||"0",10)+t.scrollBarWidth}px`),o.setAttribute(Y,""),_(o,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Y),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ne=$e,D=(e,t)=>A?e==null?(t||Te()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Ne(e,t){const n=F(),[r,o]=s.useState(()=>D(e,n==null?void 0:n.document));if(!r){const i=D(e);i&&o(i)}return s.useEffect(()=>{t&&r&&t(r)},[t,r]),s.useEffect(()=>{const i=D(e);i!==r&&o(i)},[e,r]),r}function Xe({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:o}){const i=s.useRef(null),c=s.useRef(t),f=h(n);s.useEffect(()=>{t?c.current=!0:f(i.current)},[t,f]);const g=z(i,e.ref),a=s.cloneElement(e,{ref:g});return t?a:o||!c.current&&r?null:a}function Ve({in:e,onTransition:t}){const n=s.useRef(null),r=s.useRef(!0),o=h(t);return V(()=>{if(!n.current)return;let i=!1;return o({in:e,element:n.current,initial:r.current,isStale:()=>i}),()=>{i=!0}},[e,o]),V(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Ye({children:e,in:t,onExited:n,onEntered:r,transition:o}){const[i,c]=s.useState(!t);t&&i&&c(!1);const f=Ve({in:!!t,onTransition:a=>{const p=()=>{a.isStale()||(a.in?r==null||r(a.element,a.initial):(c(!0),n==null||n(a.element)))};Promise.resolve(o(a)).then(p,v=>{throw a.in||c(!0),v})}}),g=z(f,e.ref);return i&&!t?null:s.cloneElement(e,{ref:g})}function q(e,t,n){return e?d.jsx(e,Object.assign({},n)):t?d.jsx(Ye,Object.assign({},n,{transition:t})):d.jsx(Xe,Object.assign({},n))}function qe(e){return e.code==="Escape"||e.keyCode===27}const ze=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Ge(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}let C;function Je(e){return C||(C=new ne({ownerDocument:e==null?void 0:e.document})),C}function Qe(e){const t=F(),n=e||Je(t),r=s.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:s.useCallback(o=>{r.current.dialog=o},[]),setBackdropRef:s.useCallback(o=>{r.current.backdrop=o},[])})}const re=s.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:o,style:i,children:c,backdrop:f=!0,keyboard:g=!0,onBackdropClick:a,onEscapeKeyDown:p,transition:v,runTransition:m,backdropTransition:oe,runBackdropTransition:se,autoFocus:ie=!0,enforceFocus:ue=!0,restoreFocus:ce=!0,restoreFocusOptions:ae,renderDialog:K,renderBackdrop:le=u=>d.jsx("div",Object.assign({},u)),manager:de,container:fe,onShow:S,onHide:W=()=>{},onExit:me,onExited:I,onExiting:he,onEnter:ge,onEntering:pe,onEntered:be}=e,ve=Ge(e,ze);const b=F(),E=Ne(fe),l=Qe(de),Ee=G(),ye=De(n),[w,L]=s.useState(!n),y=s.useRef(null);s.useImperativeHandle(t,()=>l,[l]),A&&!ye&&n&&(y.current=j(b==null?void 0:b.document)),n&&w&&L(!1);const P=h(()=>{if(l.add(),T.current=$(document,"keydown",xe),k.current=$(document,"focus",()=>setTimeout(Re),!0),S&&S(),ie){var u,U;const M=j((u=(U=l.dialog)==null?void 0:U.ownerDocument)!=null?u:b==null?void 0:b.document);l.dialog&&M&&!N(l.dialog,M)&&(y.current=M,l.dialog.focus())}}),x=h(()=>{if(l.remove(),T.current==null||T.current(),k.current==null||k.current(),ce){var u;(u=y.current)==null||u.focus==null||u.focus(ae),y.current=null}});s.useEffect(()=>{!n||!E||P()},[n,E,P]),s.useEffect(()=>{w&&x()},[w,x]),Z(()=>{x()});const Re=h(()=>{if(!ue||!Ee()||!l.isTopModal())return;const u=j(b==null?void 0:b.document);l.dialog&&u&&!N(l.dialog,u)&&l.dialog.focus()}),we=h(u=>{u.target===u.currentTarget&&(a==null||a(u),f===!0&&W())}),xe=h(u=>{g&&qe(u)&&l.isTopModal()&&(p==null||p(u),u.defaultPrevented||W())}),k=s.useRef(),T=s.useRef(),ke=(...u)=>{L(!0),I==null||I(...u)};if(!E)return null;const H=Object.assign({role:r,ref:l.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ve,{style:i,className:o,tabIndex:-1});let O=K?K(H):d.jsx("div",Object.assign({},H,{children:s.cloneElement(c,{role:"document"})}));O=q(v,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:me,onExiting:he,onExited:ke,onEnter:ge,onEntering:pe,onEntered:be,children:O});let R=null;return f&&(R=le({ref:l.setBackdropRef,onClick:we}),R=q(oe,se,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:R})),d.jsx(d.Fragment,{children:Oe.createPortal(d.jsxs(d.Fragment,{children:[R,O]}),E)})});re.displayName="Modal";const it=Object.assign(re,{Manager:ne});export{rt as A,it as B,ne as M,J as a,je as b,h as c,ot as d,st as e,nt as f,Z as g,z as u};
