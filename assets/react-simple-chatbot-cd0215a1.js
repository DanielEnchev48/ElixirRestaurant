import{c as jn,b as kn}from"./@babel-24348a6a.js";import{r as En}from"./react-98b02e0c.js";import{r as Pn}from"./styled-components-fa0e1fd8.js";var zt={exports:{}};(function(Ct,Cn){(function(Ve,be){Ct.exports=be(En,Pn)})(typeof self<"u"?self:jn,function(Ve,be){return function(z){function S(p){if(b[p])return b[p].exports;var g=b[p]={i:p,l:!1,exports:{}};return z[p].call(g.exports,g,g.exports,S),g.l=!0,g.exports}var b={};return S.m=z,S.c=b,S.d=function(p,g,x){S.o(p,g)||Object.defineProperty(p,g,{enumerable:!0,get:x})},S.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},S.t=function(p,g){if(1&g&&(p=S(p)),8&g||4&g&&typeof p=="object"&&p&&p.__esModule)return p;var x=Object.create(null);if(S.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:p}),2&g&&typeof p!="string")for(var v in p)S.d(x,v,(function(k){return p[k]}).bind(null,v));return x},S.n=function(p){var g=p&&p.__esModule?function(){return p.default}:function(){return p};return S.d(g,"a",g),g},S.o=function(p,g){return Object.prototype.hasOwnProperty.call(p,g)},S.p="dist/",S(S.s=9)}([function(z,S,b){z.exports=b(5)()},function(z,S){z.exports=Ve},function(z,S){z.exports=be},function(z,S){function b(C,O,T){return O instanceof Array?function(q,y,B){for(var N=0,D=y.length;N<D;N++)y[N]=b(q,y[N],B);return y}(C,O,T):O instanceof W?O.length?T.hasOwnProperty(O)?T[O]:T[O]=function(q,y){for(var B=0,N=y.length;B<N;q=q[y[B++].replace(k,p)]);return q}(C,O.split(p)):C:O instanceof Object?function(q,y,B){for(var N in y)y.hasOwnProperty(N)&&(y[N]=b(q,y[N],B));return y}(C,O,T):O}var p="~",g="\\x"+("0"+p.charCodeAt(0).toString(16)).slice(-2),x="\\"+g,v=new RegExp(g,"g"),k=new RegExp(x,"g"),M=new RegExp("(?:^|([^\\\\]))"+x),K=[].indexOf||function(C){for(var O=this.length;O--&&this[O]!==C;);return O},W=String;this.stringify=function(C,O,T,q){return JSON.stringify(C,function(y,B,N){var D,Z=[],J=[y],ue=[y],Q=[N?p:"[Circular]"],ce=y,L=1;return function(re,I){return B&&(I=B.call(this,re,I)),re!==""&&(ce!==this&&(D=L-K.call(J,this)-1,L-=D,J.splice(L,J.length),Z.splice(L-1,Z.length),ce=this),typeof I=="object"&&I?(K.call(J,I)<0&&J.push(ce=I),L=J.length,(D=K.call(ue,I))<0?(D=ue.push(I)-1,N?(Z.push((""+re).replace(v,g)),Q[D]=p+Z.join(p)):Q[D]=Q[0]):I=Q[D]):typeof I=="string"&&N&&(I=I.replace(g,x).replace(p,g))),I}}(C,O,!q),T)},this.parse=function(C,O){return JSON.parse(C,function(T){return function(q,y){var B=typeof y=="string";return B&&y.charAt(0)===p?new W(y.slice(1)):(q===""&&(y=b(y,y,{})),B&&(y=y.replace(M,"$1"+p).replace(x,g)),T?T.call(this,q,y):y)}}(O))}},function(z,S,b){z.exports=function(p,g){var x=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],v="";(g=g||"aA0").split("").forEach(function(M){isNaN(parseInt(M))?/[a-z]/.test(M)?v+=x[0]:/[A-Z]/.test(M)?v+=x[1]:v+=x[3]:v+=x[2]}),p=p||30;for(var k="";p--;)k+=v.charAt(Math.floor(Math.random()*v.length));return k}},function(z,S,b){var p=b(6),g=b(7),x=b(8);z.exports=function(){function v(K,W,C,O,T,q){q!==x&&g(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function k(){return v}v.isRequired=v;var M={array:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:k,element:v,instanceOf:k,node:v,objectOf:k,oneOf:k,oneOfType:k,shape:k,exact:k};return M.checkPropTypes=p,M.PropTypes=M,M}},function(z,S,b){function p(x){return function(){return x}}var g=function(){};g.thatReturns=p,g.thatReturnsFalse=p(!1),g.thatReturnsTrue=p(!0),g.thatReturnsNull=p(null),g.thatReturnsThis=function(){return this},g.thatReturnsArgument=function(x){return x},z.exports=g},function(z,S,b){z.exports=function(p,g,x,v,k,M,K,W){if(!p){var C;if(g===void 0)C=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var O=[x,v,k,M,K,W],T=0;(C=new Error(g.replace(/%s/g,function(){return O[T++]}))).name="Invariant Violation"}throw C.framesToPop=1,C}}},function(z,S,b){z.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(z,S,b){function p(){var e=k([`
  0% { box-shadow: 0 0 0 0 `,`; }
  70% { box-shadow: 0 0 0 10px `,`; }
  100% { box-shadow: 0 0 0 0 `,`; }
`]);return p=function(){return e},e}function g(){var e=k([`
  25% { transform: rotate(-1deg); }
  100% { transform: rotate(1deg); }
`]);return g=function(){return e},e}function x(){var e=k([`
  100% { transform: scale(1); }
`]);return x=function(){return e},e}function v(){var e=k([`
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
`]);return v=function(){return e},e}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function M(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  animation: `,` 1.4s infinite both;
  animation-delay: `,`;
`]);return M=function(){return e},e}function K(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  background: #fff;
  border-radius: 5px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  display: flex;
  justify-content: center;
  margin: 0 6px 10px 6px;
  padding: 16px;
`]);return K=function(){return e},e}function W(e){return(W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function T(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(r,n){(Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(r,n)}(e,t)}function q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  animation: `,` 0.3s ease forwards;
  cursor: pointer;
  display: inline-block;
  margin: 2px;
  transform: scale(0);
`]);return B=function(){return e},e}function N(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  background: `,`;
  border-radius: 22px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  padding: 12px;

  &:hover {
    opacity: 0.7;
  }
`]);return N=function(){return e},e}function D(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  margin: 2px 0 12px 0;
  padding: 0 6px;
`]);return D=function(){return e},e}function Z(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([""]);return Z=function(){return e},e}function J(e){return(J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(r,n){(Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(r,n)}(e,t)}function L(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  animation: `,` 0.3s ease forwards;
  background: `,`;
  border-radius: `,`;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
  color: `,`;
  display: inline-block;
  font-size: 14px;
  max-width: 50%;
  margin: `,`;
  overflow: hidden;
  position: relative;
  padding: 12px;
  transform: scale(0);
  transform-origin: `,`;
`]);return I=function(){return e},e}function De(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  animation: `,` 0.3s ease forwards;
  border-radius: `,`;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
  height: 40px;
  min-width: 40px;
  padding: 3px;
  transform: scale(0);
  transform-origin: `,`;
  width: 40;
`]);return De=function(){return e},e}function Le(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  display: inline-block;
  order: `,`;
  padding: 6px;
`]);return Le=function(){return e},e}function Ue(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  align-items: flex-end;
  display: flex;
  justify-content: `,`;
`]);return Ue=function(){return e},e}function He(e){return(He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function qt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(r,n){(Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(r,n)}(e,t)}function X(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e){return(ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Je(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  background: `,`;
  border-radius: 10px;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  font-family: `,`;
  overflow: hidden;
  position: `,`;
  bottom: `,`;
  top: `,`;
  right: `,`;
  left: `,`;
  width: `,`;
  height: `,`;
  z-index: 999;
  transform: `,`;
  transform-origin: `,`;
  transition: transform 0.3s ease;

  @media screen and (max-width: 568px) {
    border-radius: `,`;
    bottom: 0 !important;
    left: initial !important;
    height: 100%;
    right: 0 !important;
    top: initial !important;
    width: 100%;
  }
`]);return Je=function(){return e},e}function We(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  height: calc(`," - ",`);
  overflow-y: scroll;
  margin-top: 2px;
  padding-top: 6px;

  @media screen and (max-width: 568px) {
    height: `,`;
  }
`]);return We=function(){return e},e}function Ge(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  align-items: center;
  background: `,`;
  color: `,`;
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: space-between;
  padding: 0 10px;
`]);return Ge=function(){return e},e}function Ye(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  margin: 0;
  font-size: `,`;
`]);return Ye=function(){return e},e}function Ze(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  cursor: pointer;
`]);return Ze=function(){return e},e}function Qe(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  align-items: center;
  cursor: pointer;
  background: `,`;
  bottom: 32px;
  border-radius: 100%;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);
  display: flex;
  fill: `,`;
  height: 56px;
  justify-content: center;
  position: fixed;
  right: 32px;
  transform: `,`;
  transition: transform 0.3s ease;
  width: 56px;
  z-index: 999;
`]);return Qe=function(){return e},e}function Xe(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  height: 24px;
  width: 24px;
`]);return Xe=function(){return e},e}function et(){var e=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))}([`
  position: relative;
`]);return et=function(){return e},e}function tt(){var e=rt([`
          `,` .2s ease
        `]);return tt=function(){return e},e}function nt(){var e=rt([`
  animation: `,`;
  border: 0;
  border-radius: 0;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
  border-top: `,`;
  box-shadow: `,`;
  box-sizing: border-box;
  color: `,`;
  font-size: 16px;
  opacity: `,`;
  outline: none;
  padding: `,`;
  width: 100%;
  -webkit-appearance: none;

  &:disabled {
    background: #fff;
  }

  @media screen and (max-width: 568px) {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
`]);return nt=function(){return e},e}function rt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ot(){var e=at([`
            `,` 2s ease infinite
          `]);return ot=function(){return e},e}function it(){var e=at([`
  background-color: transparent;
  border: 0;
  border-bottom-right-radius: 10px;
  box-shadow: none;
  cursor: `,`;
  fill: `,`;
  opacity: `,`;
  outline: none;
  padding: 14px 16px 12px 16px;
  position: absolute;
  right: 0;
  top: 0;
  &:before {
    content: '';
    position: absolute;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    animation: `,`;
  }
  &:not(:disabled):hover {
    opacity: 0.7;
  }
`]);return it=function(){return e},e}function at(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ct(e,t,r){return t&&ut(e.prototype,t),r&&ut(e,r),e}function lt(e){return(lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Rt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(r,n){(Object.setPrototypeOf||function(o,i){return o.__proto__=i,o})(r,n)}(e,t)}function h(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}b.r(S);var le=b(1),d=b.n(le),Nt=b(0),a=b.n(Nt),It=b(4),At=b.n(It),te=b(2),R=b.n(te),me=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=function(n){n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(i,c,u,s){return c+c+u+u+s+s});var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}(e);return"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(t,")")},Mt=Object(te.keyframes)(v()),Se=Object(te.keyframes)(x()),Tt=Object(te.keyframes)(g()),xe=R.a.span(M(),Mt,function(e){return e.delay}),we=function(){return d.a.createElement("span",{className:"rsc-loading"},d.a.createElement(xe,{delay:"0s"},"."),d.a.createElement(xe,{delay:".2s"},"."),d.a.createElement(xe,{delay:".4s"},"."))},Bt=R.a.div(K()),Oe=function(e){function t(){var r,n;(function(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return y(q(q(n=function(u,s){return!s||W(s)!=="object"&&typeof s!="function"?q(u):s}(this,(r=O(t)).call.apply(r,[this].concat(i))))),"state",{loading:!0}),y(q(q(n)),"renderComponent",function(){var u=n.props,s=u.step,f=u.steps,m=u.previousStep,w=u.triggerNextStep,l=s.component;return d.a.cloneElement(l,{step:s,steps:f,previousStep:m,triggerNextStep:w})}),n}return T(t,le.Component),function(r,n,o){n&&C(r.prototype,n),o&&C(r,o)}(t,[{key:"componentDidMount",value:function(){var r=this,n=this.props,o=n.speak,i=n.step,c=n.previousValue,u=n.triggerNextStep,s=i.delay,f=i.waitAction;setTimeout(function(){r.setState({loading:!1},function(){f||i.rendered||u(),o(i,c)})},s)}},{key:"render",value:function(){var r=this.state.loading,n=this.props.style;return d.a.createElement(Bt,{className:"rsc-cs",style:n},r?d.a.createElement(we,null):this.renderComponent())}}]),t}();Oe.propTypes={previousStep:a.a.objectOf(a.a.any).isRequired,previousValue:a.a.oneOfType([a.a.string,a.a.bool,a.a.number,a.a.object,a.a.array]),speak:a.a.func,step:a.a.objectOf(a.a.any).isRequired,steps:a.a.objectOf(a.a.any).isRequired,style:a.a.objectOf(a.a.any).isRequired,triggerNextStep:a.a.func.isRequired},Oe.defaultProps={previousValue:"",speak:function(){}};var _t=Oe,Ft=R.a.li(B(),Se),oe={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"},dt=R.a.a(N(),function(e){return e.theme.botBubbleColor},function(e){return e.theme.botFontColor});dt.defaultProps={theme:oe};var Vt=dt,Dt=R.a.ul(D()),Lt=R.a.div(Z()),gt=function(e){function t(){var r,n;(function(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return re(L(L(n=function(u,s){return!s||J(s)!=="object"&&typeof s!="function"?L(u):s}(this,(r=Q(t)).call.apply(r,[this].concat(i))))),"onOptionClick",function(u){var s=u.value;(0,n.props.triggerNextStep)({value:s})}),re(L(L(n)),"renderOption",function(u){var s=n.props,f=s.bubbleOptionStyle,m=s.step.user,w=u.value,l=u.label;return d.a.createElement(Ft,{key:w,className:"rsc-os-option"},d.a.createElement(Vt,{className:"rsc-os-option-element",style:f,user:m,onClick:function(){return n.onOptionClick({value:w})}},l))}),n}return ce(t,le.Component),function(r,n,o){n&&ue(r.prototype,n),o&&ue(r,o)}(t,[{key:"render",value:function(){var r=this.props.step.options;return d.a.createElement(Lt,{className:"rsc-os"},d.a.createElement(Dt,{className:"rsc-os-options"},Object.keys(r).map(function(n){return r[n]}).map(this.renderOption)))}}]),t}();gt.propTypes={bubbleOptionStyle:a.a.objectOf(a.a.any).isRequired,step:a.a.objectOf(a.a.any).isRequired,triggerNextStep:a.a.func.isRequired};var Ut=gt,ht=R.a.div(I(),Se,function(e){return e.user?e.theme.userBubbleColor:e.theme.botBubbleColor},function(e){var t=e.isFirst,r=e.isLast,n=e.user;return t||r?!t&&r?n?"18px 0 18px 18px":"0 18px 18px 18px":e.user?"18px 18px 0 18px":"18px 18px 18px 0":n?"18px 0 0 18px":"0 18px 18px 0px"},function(e){return e.user?e.theme.userFontColor:e.theme.botFontColor},function(e){var t=e.isFirst,r=e.showAvatar,n=e.user;return!t&&r?n?"-8px 46px 10px 0":"-8px 0 10px 46px":t||r?"0 0 10px 0":n?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(e){var t=e.isFirst,r=e.user;return t?r?"bottom right":"bottom left":r?"top right":"top left"});ht.defaultProps={theme:oe};var Ht=ht,$t=R.a.img(De(),Se,function(e){return e.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(e){return e.user?"bottom left":"bottom right"}),Kt=R.a.div(Le(),function(e){return e.user?"1":"0"}),Jt=R.a.div(Ue(),function(e){return e.user?"flex-end":"flex-start"}),je=function(e){function t(){var r,n;(function(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return ye(X(X(n=function(u,s){return!s||He(s)!=="object"&&typeof s!="function"?X(u):s}(this,(r=Ke(t)).call.apply(r,[this].concat(i))))),"state",{loading:!0}),ye(X(X(n)),"getMessage",function(){var u=n.props,s=u.previousValue,f=u.step.message;return f?f.replace(/{previousValue}/g,s):""}),ye(X(X(n)),"renderMessage",function(){var u=n.props,s=u.step,f=u.steps,m=u.previousStep,w=u.triggerNextStep,l=s.component;return l?d.a.cloneElement(l,{step:s,steps:f,previousStep:m,triggerNextStep:w}):n.getMessage()}),n}return qt(t,le.Component),function(r,n,o){n&&$e(r.prototype,n),o&&$e(r,o)}(t,[{key:"componentDidMount",value:function(){var r=this,n=this.props,o=n.step,i=n.speak,c=n.previousValue,u=n.triggerNextStep,s=o.component,f=o.delay,m=o.waitAction,w=s&&m;setTimeout(function(){r.setState({loading:!1},function(){w||o.rendered||u(),i(o,c)})},f)}},{key:"render",value:function(){var r=this.props,n=r.step,o=r.isFirst,i=r.isLast,c=r.avatarStyle,u=r.bubbleStyle,s=r.hideBotAvatar,f=r.hideUserAvatar,m=this.state.loading,w=n.avatar,l=n.user,_=l?!f:!s;return d.a.createElement(Jt,{className:"rsc-ts ".concat(l?"rsc-ts-user":"rsc-ts-bot"),user:l},d.a.createElement(Kt,{className:"rsc-ts-image-container",user:l},o&&_&&d.a.createElement($t,{className:"rsc-ts-image",style:c,showAvatar:_,user:l,src:w,alt:"avatar"})),d.a.createElement(Ht,{className:"rsc-ts-bubble",style:u,user:l,showAvatar:_,isFirst:o,isLast:i},m?d.a.createElement(we,null):this.renderMessage()))}}]),t}();je.propTypes={avatarStyle:a.a.objectOf(a.a.any).isRequired,isFirst:a.a.bool.isRequired,isLast:a.a.bool.isRequired,bubbleStyle:a.a.objectOf(a.a.any).isRequired,hideBotAvatar:a.a.bool.isRequired,hideUserAvatar:a.a.bool.isRequired,previousStep:a.a.objectOf(a.a.any),previousValue:a.a.oneOfType([a.a.string,a.a.bool,a.a.number,a.a.object,a.a.array]),speak:a.a.func,step:a.a.objectOf(a.a.any).isRequired,steps:a.a.objectOf(a.a.any),triggerNextStep:a.a.func.isRequired},je.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Wt=je,Gt=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Yt=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Zt=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Qt=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Xt=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],bt=b(3),yt={parse:function(e){var t=[];if(e.user)t=Gt;else if(e.message)t=Yt;else if(e.options)t=Zt;else if(e.component)t=Qt;else{if(!e.update)throw new Error("The step ".concat(bt.stringify(e)," is invalid"));t=Xt}for(var r=0,n=t.length;r<n;r+=1){var o=t[r],i=o.key,c=o.types,u=o.required;if(!e[i]&&u)throw new Error("Key '".concat(i,"' is required in step ").concat(bt.stringify(e)));if(e[i]&&c[0]!=="any"&&c.indexOf(ve(e[i]))<0)throw new Error("The type of '".concat(i,"' value must be ").concat(c.join(" or ")," instead of ").concat(ve(e[i])))}var s=t.map(function(f){return f.key});for(var i in e)s.indexOf(i)<0&&(console.error("Invalid key '".concat(i,"' in step '").concat(e.id,"'")),delete e[i]);return e},checkInvalidIds:function(e){for(var t in e){var r=e[t],n=e[t].trigger;if(typeof n!="function"){if(r.options)for(var o=r.options.filter(function(s){return typeof s.trigger!="function"}).map(function(s){return s.trigger}),i=0,c=o.length;i<c;i+=1){var u=o[i];if(u&&!e[u])throw new Error("The id '".concat(u,"' triggered by option ").concat(i+1," in step '").concat(e[t].id,"' does not exist"))}else if(n&&!e[n])throw new Error("The id '".concat(n,"' triggered by step '").concat(e[t].id,"' does not exist"))}}}},de=b(3),en=function(e,t){var r=de.parse(de.stringify(t));for(var n in r)for(var o=0,i=r[n].length;o<i;o+=1)r[n][o].component&&(r[n][o].component=r[n][o].id);localStorage.setItem(e,de.stringify(r))},vt=R.a.div(Je(),function(e){return e.theme.background},function(e){return e.theme.fontFamily},function(e){return e.floating?"fixed":"relative"},function(e){var t=e.floating,r=e.floatingStyle;return t?r.bottom||"32px":"initial"},function(e){var t=e.floating,r=e.floatingStyle;return t&&r.top||"initial"},function(e){var t=e.floating,r=e.floatingStyle;return t?r.right||"32px":"initial"},function(e){var t=e.floating,r=e.floatingStyle;return t&&r.left||"initial"},function(e){return e.width},function(e){return e.height},function(e){return e.opened?"scale(1)":"scale(0)"},function(e){return e.floatingStyle.transformOrigin||"bottom right"},function(e){return e.floating?"0":""});vt.defaultProps={theme:oe};var tn=vt,nn=R.a.div(We(),function(e){return e.height},function(e){return e.hideInput?"56px":"112px"},function(e){return e.floating?"calc(100% - 112px)":""}),mt=R.a.div(Ge(),function(e){return e.theme.headerBgColor},function(e){return e.theme.headerFontColor},function(e){return e.theme.headerFontColor});mt.defaultProps={theme:oe};var rn=mt,St=R.a.h2(Ye(),function(e){return e.theme.headerFontSize});St.defaultProps={theme:oe};var on=St,an=R.a.a(Ze()),xt=R.a.a(Qe(),function(e){return e.theme.headerBgColor},function(e){return e.theme.headerFontColor},function(e){return e.opened?"scale(0)":"scale(1)"});xt.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var sn=xt,un=R.a.img(Xe()),cn=R.a.div(et()),ln=R.a.input(nt(),function(e){return e.invalid?Object(te.css)(tt(),Tt):""},function(e){return e.invalid?"0":"1px solid #eee"},function(e){return e.invalid?"inset 0 0 2px #E53935":"none"},function(e){return e.invalid?"#E53935":""},function(e){return e.disabled&&!e.invalid?".5":"1"},function(e){return e.hasButton?"16px 52px 16px 10px":"16px 10px"},function(e){return e.floating?"0":"10px"},function(e){return e.floating?"0":"10px"}),wt=R.a.button(it(),function(e){return e.disabled?"default":"pointer"},function(e){var t=e.speaking,r=e.invalid,n=e.theme;return t?n.headerBgColor:r?"#E53935":"#4a4a4a"},function(e){return e.disabled&&!e.invalid?".5":"1"},function(e){var t=e.theme;return e.speaking?Object(te.css)(ot(),function(r){return Object(te.keyframes)(p(),me(r,.4),me(r,0),me(r,0))}(t.headerBgColor)):""});wt.defaultProps={theme:oe};var pn=wt,ke=null,Ee=function(){},Ot=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ee,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"en";return function(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}(this,e),ke||(ke=this),this.state={inputValue:"",lang:o,onChange:t,onEnd:r,onStop:n},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),ke}return ct(e,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),ct(e,[{key:"onChange",value:function(t){var r=this.state.onChange;this.setState({inputValue:t}),r(t)}},{key:"onFinal",value:function(t){this.setState({inputValue:t}),this.recognition.stop()}},{key:"onEnd",value:function(){var t=this.state,r=t.onStop,n=t.onEnd,o=t.force;this.setState({speaking:!1}),o?r():n()}},{key:"onResult",value:function(t){for(var r="",n="",o=t.resultIndex;o<t.results.length;o+=1)t.results[o].isFinal?(n+=t.results[o][0].transcript,this.onFinal(n)):(r+=t.results[o][0].transcript,this.onChange(r))}},{key:"setState",value:function(t){this.state=st({},this.state,t)}},{key:"setup",value:function(){if(!e.isSupported())return this;var t=window.webkitSpeechRecognition;return this.recognition=new t,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(t){return this.setState({lang:t}),this.setup(),this}},{key:"speak",value:function(){return e.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),e}(),fn=function(){return d.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},d.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),d.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},dn=function(){return d.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},d.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),d.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Pe=function(e){var t=e.size;return d.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 500 500"},d.a.createElement("g",null,d.a.createElement("g",null,d.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};Pe.propTypes={size:a.a.number},Pe.defaultProps={size:20};var gn=Pe,ze=function(e){var t=e.size;return d.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 400 400"},d.a.createElement("g",null,d.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),d.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};ze.propTypes={size:a.a.number},ze.defaultProps={size:20};var hn=ze,Ce=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},jt=function(e){return typeof e=="string"},bn=function(e){return function(t,r){var n=e.lang,o=e.voice,i=e.enable,c=t.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!c&&i){var u=function(f){var m=f.message,w=f.metadata,l=w===void 0?{}:w;return jt(l.speak)?l.speak:jt(m)?m:""}(t),s=new window.SpeechSynthesisUtterance;s.text=u.replace(/{previousValue}/g,r),s.lang=n,s.voice=o,window.speechSynthesis.speak(s)}}},qe=function(e){function t(r){var n;return function(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),E(h(h(n=function(o,i){return!i||lt(i)!=="object"&&typeof i!="function"?h(o):i}(this,ft(t).call(this,r)))),"onNodeInserted",function(o){var i=o.currentTarget;n.props.enableSmoothScroll&&n.supportsScrollBehavior?i.scroll({top:i.scrollHeight,left:0,behavior:"smooth"}):i.scrollTop=i.scrollHeight}),E(h(h(n)),"onResize",function(){n.content.scrollTop=n.content.scrollHeight}),E(h(h(n)),"onRecognitionChange",function(o){n.setState({inputValue:o})}),E(h(h(n)),"onRecognitionEnd",function(){n.setState({speaking:!1}),n.handleSubmitButton()}),E(h(h(n)),"onRecognitionStop",function(){n.setState({speaking:!1})}),E(h(h(n)),"onValueChange",function(o){n.setState({inputValue:o.target.value})}),E(h(h(n)),"getTriggeredStep",function(o,i){var c=n.generateRenderedStepsById();return typeof o=="function"?o({value:i,steps:c}):o}),E(h(h(n)),"getStepMessage",function(o){var i=n.state.previousSteps,c=i.length>0?i.length-1:0,u=n.generateRenderedStepsById(),s=i[c].value;return typeof o=="function"?o({previousValue:s,steps:u}):o}),E(h(h(n)),"generateRenderedStepsById",function(){for(var o=n.state.previousSteps,i={},c=0,u=o.length;c<u;c+=1){var s=o[c],f=s.id,m=s.message,w=s.value,l=s.metadata;i[f]={id:f,message:m,value:w,metadata:l}}return i}),E(h(h(n)),"triggerNextStep",function(o){var i=n.props.enableMobileAutoFocus,c=n.state,u=c.defaultUserSettings,s=c.previousSteps,f=c.renderedSteps,m=c.steps,w=n.state,l=w.currentStep,_=w.previousStep,H=l.end;if(o&&o.value&&(l.value=o.value),o&&o.hideInput&&(l.hideInput=o.hideInput),o&&o.trigger&&(l.trigger=n.getTriggeredStep(o.trigger,o.value)),H)n.handleEnd();else if(l.options&&o){var j=l.options.filter(function(Y){return Y.value===o.value})[0],U=n.getTriggeredStep(j.trigger,l.value);delete l.options,l=ee({},l,j,u,{user:!0,message:j.label,trigger:U}),f.pop(),s.pop(),f.push(l),s.push(l),n.setState({currentStep:l,renderedSteps:f,previousSteps:s})}else if(l.trigger){l.replace&&f.pop();var P=ee({},m[n.getTriggeredStep(l.trigger,l.value)]);if(P.message)P.message=n.getStepMessage(P.message);else if(P.update){var F=P;if((P=ee({},m[F.update])).options)for(var A=0,$=P.options.length;A<$;A+=1)P.options[A].trigger=F.trigger;else P.trigger=F.trigger}P.key=At()(24),_=l,l=P,n.setState({renderedSteps:f,currentStep:l,previousStep:_},function(){P.user?n.setState({disabled:!1},function(){!i&&Ce()||n.input&&n.input.focus()}):(f.push(P),s.push(P),n.setState({renderedSteps:f,previousSteps:s}))})}var G=n.props,ie=G.cache,pe=G.cacheName;ie&&setTimeout(function(){en(pe,{currentStep:l,previousStep:_,previousSteps:s,renderedSteps:f})},300)}),E(h(h(n)),"handleEnd",function(){var o=n.props.handleEnd;if(o){for(var i=n.state.previousSteps,c=i.map(function(j){return{id:j.id,message:j.message,value:j.value,metadata:j.metadata}}),u=[],s=0,f=i.length;s<f;s+=1){var m=i[s],w=m.id,l=m.message,_=m.value,H=m.metadata;u[w]={id:w,message:l,value:_,metadata:H}}o({renderedSteps:c,steps:u,values:i.filter(function(j){return j.value}).map(function(j){return j.value})})}}),E(h(h(n)),"isInputValueEmpty",function(){var o=n.state.inputValue;return!o||o.length===0}),E(h(h(n)),"isLastPosition",function(o){var i=n.state.renderedSteps,c=i.length,u=i.map(function(f){return f.key}).indexOf(o.key);if(c<=1||u+1===c)return!0;var s=i[u+1];return!s.message&&!s.asMessage||o.user!==s.user}),E(h(h(n)),"isFirstPosition",function(o){var i=n.state.renderedSteps,c=i.map(function(s){return s.key}).indexOf(o.key);if(c===0)return!0;var u=i[c-1];return!u.message&&!u.asMessage||o.user!==u.user}),E(h(h(n)),"handleKeyPress",function(o){o.key==="Enter"&&n.submitUserMessage()}),E(h(h(n)),"handleSubmitButton",function(){var o=n.state,i=o.speaking,c=o.recognitionEnable;if((n.isInputValueEmpty()||i)&&c)return n.recognition.speak(),void(i||n.setState({speaking:!0}));n.submitUserMessage()}),E(h(h(n)),"submitUserMessage",function(){var o=n.state,i=o.defaultUserSettings,c=o.inputValue,u=o.previousSteps,s=o.renderedSteps,f=n.state.currentStep;f.validator&&n.checkInvalidInput()||(f=ee({},i,f,{message:c,value:c}),s.push(f),u.push(f),n.setState({currentStep:f,renderedSteps:s,previousSteps:u,disabled:!0,inputValue:""},function(){n.input&&n.input.blur()}))}),E(h(h(n)),"checkInvalidInput",function(){var o=n.props.enableMobileAutoFocus,i=n.state,c=i.currentStep,u=i.inputValue,s=c.validator(u),f=u;return!(typeof s=="boolean"&&s||(n.setState({inputValue:s.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){n.setState({inputValue:f,inputInvalid:!1,disabled:!1},function(){!o&&Ce()||n.input&&n.input.focus()})},2e3)}),0))}),E(h(h(n)),"toggleChatBot",function(o){var i=n.props.toggleFloating;i?i({opened:o}):n.setState({opened:o})}),E(h(h(n)),"renderStep",function(o,i){var c=n.state.renderedSteps,u=n.props,s=u.avatarStyle,f=u.bubbleStyle,m=u.bubbleOptionStyle,w=u.customStyle,l=u.hideBotAvatar,_=u.hideUserAvatar,H=u.speechSynthesis,j=o.options,U=o.component,P=o.asMessage,F=n.generateRenderedStepsById(),A=i>0?c[i-1]:{};return U&&!P?d.a.createElement(_t,{key:i,speak:n.speak,step:o,steps:F,style:w,previousStep:A,previousValue:A.value,triggerNextStep:n.triggerNextStep}):j?d.a.createElement(Ut,{key:i,step:o,speak:n.speak,previousValue:A.value,triggerNextStep:n.triggerNextStep,bubbleOptionStyle:m}):d.a.createElement(Wt,{key:i,step:o,steps:F,speak:n.speak,previousStep:A,previousValue:A.value,triggerNextStep:n.triggerNextStep,avatarStyle:s,bubbleStyle:f,hideBotAvatar:l,hideUserAvatar:_,speechSynthesis:H,isFirst:n.isFirstPosition(o),isLast:n.isLastPosition(o)})}),n.content=null,n.input=null,n.supportsScrollBehavior=!1,n.setContentRef=function(o){n.content=o},n.setInputRef=function(o){n.input=o},n.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:r.opened||!r.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:r.recognitionEnable&&Ot.isSupported(),defaultUserSettings:{}},n.speak=bn(r.speechSynthesis),n}return Rt(t,le.Component),function(r,n,o){n&&pt(r.prototype,n),o&&pt(r,o)}(t,[{key:"componentDidMount",value:function(){for(var r=this,n=this.props.steps,o=this.props,i=o.botDelay,c=o.botAvatar,u=o.cache,s=o.cacheName,f=o.customDelay,m=o.enableMobileAutoFocus,w=o.userAvatar,l={},_={delay:i,avatar:c},H={delay:o.userDelay,avatar:w,hideInput:!1},j={delay:f},U=0,P=n.length;U<P;U+=1){var F=n[U],A={};F.user?A=H:F.message||F.asMessage?A=_:F.component&&(A=j),l[F.id]=ee({},A,yt.parse(F))}yt.checkInvalidIds(l);var $=n[0];if($.message){var G=$.message;$.message=typeof G=="function"?G():G,l[$.id].message=$.message}var ie=this.state.recognitionEnable,pe=this.props.recognitionLang;ie&&(this.recognition=new Ot(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,pe)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var Y=function(ae,ge){var fe=ae.cacheName,Me=ae.cache,Te=ae.firstStep,ne=ae.steps,Be=Te,vn=[ne[Be.id]],mn=[ne[Be.id]];if(Me&&localStorage.getItem(fe)){var V=de.parse(localStorage.getItem(fe)),kt=V.renderedSteps[V.renderedSteps.length-1];if(!kt||!kt.end){for(var se=0,Sn=V.renderedSteps.length;se<Sn;se+=1){var Et=V.renderedSteps[se];if(V.renderedSteps[se].delay=0,V.renderedSteps[se].rendered=!0,Et.component){var xn=Et.id;V.renderedSteps[se].component=ne[xn].component}}var _e=V.currentStep,wn=_e.trigger,On=_e.end,Fe=_e.options,Pt=V.currentStep.id;if(Fe&&delete V.currentStep.rendered,!wn&&!On)if(Fe)for(var he=0;he<Fe.length;he+=1)V.currentStep.options[he].trigger=ne[Pt].options[he].trigger;else V.currentStep.trigger=ne[Pt].trigger;return V.currentStep.user&&ge(),V}localStorage.removeItem(fe)}return{currentStep:Be,previousStep:{},previousSteps:mn,renderedSteps:vn}}({cacheName:s,cache:u,firstStep:$,steps:l},function(){r.setState({disabled:!1},function(){!m&&Ce()||r.input&&r.input.focus()})}),Re=Y.currentStep,Ne=Y.previousStep,Ie=Y.previousSteps,Ae=Y.renderedSteps;this.setState({currentStep:Re,defaultUserSettings:H,previousStep:Ne,previousSteps:Ie,renderedSteps:Ae,steps:l})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var r=this,n=this.state,o=n.currentStep,i=n.disabled,c=n.inputInvalid,u=n.inputValue,s=n.opened,f=n.renderedSteps,m=n.speaking,w=n.recognitionEnable,l=this.props,_=l.className,H=l.contentStyle,j=l.floating,U=l.floatingIcon,P=l.floatingStyle,F=l.footerStyle,A=l.headerComponent,$=l.headerTitle,G=l.hideHeader,ie=l.hideSubmitButton,pe=l.inputStyle,Y=l.placeholder,Re=l.inputAttributes,Ne=l.recognitionPlaceholder,Ie=l.style,Ae=l.submitButtonStyle,ae=l.width,ge=l.height,fe=A||d.a.createElement(rn,{className:"rsc-header"},d.a.createElement(on,{className:"rsc-header-title"},$),j&&d.a.createElement(an,{className:"rsc-header-close-button",onClick:function(){return r.toggleChatBot(!1)}},d.a.createElement(dn,null))),Me=(this.isInputValueEmpty()||m)&&w?d.a.createElement(hn,null):d.a.createElement(gn,null),Te=m?Ne:o.placeholder||Y,ne=o.inputAttributes||Re;return d.a.createElement("div",{className:"rsc ".concat(_)},j&&d.a.createElement(sn,{className:"rsc-float-button",style:P,opened:s,onClick:function(){return r.toggleChatBot(!0)}},typeof U=="string"?d.a.createElement(un,{src:U}):U),d.a.createElement(tn,{className:"rsc-container",floating:j,floatingStyle:P,opened:s,style:Ie,width:ae,height:ge},!G&&fe,d.a.createElement(nn,{className:"rsc-content",ref:this.setContentRef,floating:j,style:H,height:ge,hideInput:o.hideInput},f.map(this.renderStep)),d.a.createElement(cn,{className:"rsc-footer",style:F},!o.hideInput&&d.a.createElement(ln,ee({type:"textarea",style:pe,ref:this.setInputRef,className:"rsc-input",placeholder:c?"":Te,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:u,floating:j,invalid:c,disabled:i,hasButton:!ie},ne)),!o.hideInput&&!ie&&d.a.createElement(pn,{className:"rsc-submit-button",style:Ae,onClick:this.handleSubmitButton,invalid:c,disabled:i,speaking:m},Me))))}}],[{key:"getDerivedStateFromProps",value:function(r,n){var o=r.opened;return r.toggleFloating!==void 0&&o!==void 0&&o!==n.opened?function(i){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{},s=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(u).filter(function(f){return Object.getOwnPropertyDescriptor(u,f).enumerable}))),s.forEach(function(f){E(i,f,u[f])})}return i}({},n,{opened:o}):n}}]),t}();qe.propTypes={avatarStyle:a.a.objectOf(a.a.any),botAvatar:a.a.string,botDelay:a.a.number,bubbleOptionStyle:a.a.objectOf(a.a.any),bubbleStyle:a.a.objectOf(a.a.any),cache:a.a.bool,cacheName:a.a.string,className:a.a.string,contentStyle:a.a.objectOf(a.a.any),customDelay:a.a.number,customStyle:a.a.objectOf(a.a.any),enableMobileAutoFocus:a.a.bool,enableSmoothScroll:a.a.bool,floating:a.a.bool,floatingIcon:a.a.oneOfType([a.a.string,a.a.element]),floatingStyle:a.a.objectOf(a.a.any),footerStyle:a.a.objectOf(a.a.any),handleEnd:a.a.func,headerComponent:a.a.element,headerTitle:a.a.string,height:a.a.string,hideBotAvatar:a.a.bool,hideHeader:a.a.bool,hideSubmitButton:a.a.bool,hideUserAvatar:a.a.bool,inputAttributes:a.a.objectOf(a.a.any),inputStyle:a.a.objectOf(a.a.any),opened:a.a.bool,toggleFloating:a.a.func,placeholder:a.a.string,recognitionEnable:a.a.bool,recognitionLang:a.a.string,recognitionPlaceholder:a.a.string,speechSynthesis:a.a.shape({enable:a.a.bool,lang:a.a.string,voice:typeof window<"u"?a.a.instanceOf(window.SpeechSynthesisVoice):a.a.any}),steps:a.a.arrayOf(a.a.object).isRequired,style:a.a.objectOf(a.a.any),submitButtonStyle:a.a.objectOf(a.a.any),userAvatar:a.a.string,userDelay:a.a.number,width:a.a.string},qe.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:d.a.createElement(fn,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var yn=qe;b.d(S,"Loading",function(){return we}),S.default=yn}])})})(zt);var zn=zt.exports;const In=kn(zn);export{In as C};
